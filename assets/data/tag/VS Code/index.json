{"hash":"1a485f6dceb298c3ce36b831edab4aa62783906c","data":{"tag":{"title":"VS Code","belongsTo":{"edges":[{"node":{"title":"VS Code Math to Image：在不支持 LaTeX 的地方插入数学公式","path":"/2020/08/vscode-math-to-image/","date":"August 4. 2020","timeToRead":9,"cjkWordCount":2040,"cjkReadTime":9,"description":"为了解决 GitHub 无法渲染 LaTeX 数学公式的问题，我们编写了一个 VS Code 插件。","content":"<div class=\"admonition admonition-note\"><div class=\"admonition-heading\"><h5><div class=\"admonition-icon\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"16\" viewBox=\"0 0 14 16\"><path fill-rule=\"evenodd\" d=\"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z\"></path></svg></div>🛹 同步发布</h5></div><div class=\"admonition-content\"><ul>\n<li><strong>在少数派上阅读本文</strong> — <a href=\"https://sspai.com/post/61877\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">不支持 LaTeX 也能插入数学公式，这个小插件帮你实现「徒手渲染」</a>。</li>\n<li><strong>Read the English version on Medium</strong> — <a href=\"https://medium.com/spencerweekly/vs-code-math-to-image-write-latex-math-equations-in-github-markdown-the-easy-way-9fa8b81dc910?source=friends_link&#x26;sk=cff035b443fb81f5b20a47370f23aed3\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">VS Code Math to Image: Write LaTeX Math Equations in GitHub Markdown the Easy Way!</a></li>\n</ul></div></div>\n<p>作为每天都在跟数学公式打交道的工程师、数学家，如果我们想要将自己的学术成果开源并发布在网络平台上，那么这个平台至少要支持在 Markdown 里面用 LaTeX 撰写公式。可惜，想要直接在 Markdown 里面撰写数学公式就必须借助第三方库的帮助：比如 MathJax 和 KaTeX。</p>\n<p>因此很多常见的平台都尚未支持 LaTeX 数学公式的渲染，GitHub 就是其中一员——作为可能是世界上最大、最受欢迎的代码开源平台，GitHub 是很多研究人员开源自己学术成果的首选。如果我们想要在 GitHub 的 README 等 Markdown 文件里面撰写数学公式，就必须寻找别的办法。</p>\n<p>非常幸运的是：GitHub 允许我们在 Markdown 里面直接插入 SVG 图片（以及 HTML）。这也就意味着，我们可以先将手上的 LaTeX 数学公式渲染成 SVG，再手动将原来的数学公式替换成 SVG 图片，<strong>达成「徒手渲染 LaTeX 公式」的成就。</strong>💪</p>\n<figure><img src=\"https://cdn.spencer.felinae98.cn/blog/2020/08/200804_132840.png\" alt=\"将 LaTeX 公式渲染为 SVG 后在 GitHub 上面的显示效果\"><figcaption>将 LaTeX 公式渲染为 SVG 后在 GitHub 上面的显示效果</figcaption></figure>\n<p>如何才能实现并自动化整个过程呢？为了尽量减少各位的麻烦，提升工作效率，我和同学专门编写了一个 VS Code 插件，用来自动将我们在 VS Code 里面选择的数学公式转换成 SVG 图片，并自动嵌入原位置 —— <strong>VS Code Math to Image：</strong></p>\n<ul>\n<li>目前，项目已经开源在 GitHub 上面：<a href=\"https://github.com/TeamMeow/vscode-math-to-image\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GitHub — vscode-math-to-image</a>；</li>\n<li>同时 VS Code 插件也发布到了 Visual Studio Marketplace：<a href=\"https://marketplace.visualstudio.com/items?itemName=MeowTeam.vscode-math-to-image\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">VS Marketplace — Math to Image</a>；</li>\n</ul>\n<h2 id=\"插件安装\"><a href=\"#%E6%8F%92%E4%BB%B6%E5%AE%89%E8%A3%85\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>插件安装</h2>\n<p>我们在 VS Code 的插件市场搜索 <code class=\"language-text\">vscode-math-to-image</code>，找到 Math to Image 点击安装即可。直接访问 <a href=\"https://marketplace.visualstudio.com/items?itemName=MeowTeam.vscode-math-to-image\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Visual Studio Marketplace</a> 点击 Install 也可以安装。</p>\n<figure><img src=\"https://cdn.spencer.felinae98.cn/blog/2020/08/200804_134114.png\" alt=\"VS Code 插件市场搜索：vscode-math-to-image\"><figcaption>VS Code 插件市场搜索：vscode-math-to-image</figcaption></figure>\n<h2 id=\"插件使用\"><a href=\"#%E6%8F%92%E4%BB%B6%E4%BD%BF%E7%94%A8\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>插件使用</h2>\n<p>我们成功安装插件之后，就可以直接非常方便地用插件将公式转换成可以显示在 GitHub 里面的 SVG 图片啦：</p>\n<figure><img src=\"https://cdn.spencer.felinae98.cn/blog/2020/08/200804_133321.gif\" alt=\"使用 VSCode Math to Image 插件将公式渲染为 SVG\"><figcaption>使用 VSCode Math to Image 插件将公式渲染为 SVG</figcaption></figure>\n<p>具体来讲，比如上面演示动画里面的公式：</p>\n<pre class=\"language-latex\"><code class=\"language-latex\"><span class=\"token equation string\">$$\n<span class=\"token equation-command regex\">\\ell</span> = <span class=\"token equation-command regex\">\\sum</span>_{i}^{N}(y_i - <span class=\"token equation-command regex\">\\hat</span>{y}_i)^2 - ||w||_2^2\n$$</span></code></pre>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi mathvariant=\"normal\">ℓ</mi><mo>=</mo><munderover><mo>∑</mo><mi>i</mi><mi>N</mi></munderover><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent=\"true\"><mi>y</mi><mo>^</mo></mover><mi>i</mi></msub><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup><mo>−</mo><mi mathvariant=\"normal\">∣</mi><mi mathvariant=\"normal\">∣</mi><mi>w</mi><mi mathvariant=\"normal\">∣</mi><msubsup><mi mathvariant=\"normal\">∣</mi><mn>2</mn><mn>2</mn></msubsup></mrow><annotation encoding=\"application/x-tex\">\\ell = \\sum_{i}^{N}(y_i - \\hat{y}_i)^2 - ||w||_2^2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">ℓ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.106005em;vertical-align:-1.277669em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.872331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span style=\"top:-3.050005em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.3000050000000005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.10903em;\">N</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.277669em;\"><span></span></span></span></span></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141079999999999em;vertical-align:-0.25em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">y</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.19444em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathdefault mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1141079999999999em;vertical-align:-0.25em;\"></span><span class=\"mord\">∣</span><span class=\"mord\">∣</span><span class=\"mord mathdefault\" style=\"margin-right:0.02691em;\">w</span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord\">∣</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8641079999999999em;\"><span style=\"top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.247em;\"><span></span></span></span></span></span></span></span></span></span></span>\n<p>正常在 Markdown 中我们是会直接用上面的语法让支持渲染 LaTeX 的编辑器渲染公式的，比如 VS Code 默认的 Markdown 预览视图就支持 LaTeX 数学公式的渲染。如果这一 Markdown 文件里面的公式需要在 GitHub 上显示，那么我们就需要用插件将公式渲染成 SVG。我们直接选择这三行 LaTeX 公式代码（包含第一行和第三行的 <code class=\"language-text\">$$</code>），右键并在菜单中选择「Math » Image: Insert rendered equation (local)」或者「Math » Image: Insert rendered equation (remote)」，之后插件就会将我们选中的公式自动注释掉，并在下方添加相应的 SVG 图片引用。（插件里面 <code class=\"language-text\">local</code> 和 <code class=\"language-text\">remote</code> 两个选项工作原理不同，请见后文。）</p>\n<figure><img src=\"https://cdn.spencer.felinae98.cn/blog/2020/08/200804_133228.png\" alt=\"选择公式右键后在菜单中选择渲染选项\"><figcaption>选择公式右键后在菜单中选择渲染选项</figcaption></figure>\n<p>此时，我们可以发现在 VS Code 的 Markdown 预览界面里面，SVG 图片形式的 LaTeX 公式依旧能够成功渲染，同时这一公式在 GitHub 等仍然不支持 LaTeX 的平台也能正常展现，nice！</p>\n<h2 id=\"工作原理\"><a href=\"#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>工作原理</h2>\n<p>所以，我们插件是如何将一个纯文本格式的 LaTeX 数学公式渲染为 SVG 图片的呢？前面提到的 <code class=\"language-text\">remote</code> 和 <code class=\"language-text\">local</code> 又有怎样的区别呢？这里，我就简单讲解一下插件的渲染和工作原理。</p>\n<p>首先，插件的工作原理非常简单、极易理解，我们实际上就是通过某种方式，解析 LaTeX 撰写的数学公式并将之渲染为 SVG， <code class=\"language-text\">remote</code> 和 <code class=\"language-text\">local</code> 的不同之处就在于：</p>\n<ul>\n<li>前者是借助服务器渲染公式，生成的 SVG 存在于云端；</li>\n<li>后者是直接在本地渲染公式，生成的 SVG 当然也保存于本地；</li>\n</ul>\n<figure><img src=\"https://cdn.spencer.felinae98.cn/blog/2020/08/200804_133452.png\" alt=\"VSCode Math to Image 插件的简单工作原理\"><figcaption>VSCode Math to Image 插件的简单工作原理</figcaption></figure>\n<h3 id=\"将公式借助服务器渲染为云端-svg-图片\"><a href=\"#%E5%B0%86%E5%85%AC%E5%BC%8F%E5%80%9F%E5%8A%A9%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%B8%B2%E6%9F%93%E4%B8%BA%E4%BA%91%E7%AB%AF-svg-%E5%9B%BE%E7%89%87\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>将公式借助服务器渲染为云端 SVG 图片</h3>\n<p>虽然 GitHub 的 README 等 Markdown 文件里面并不支持 LaTeX 数学公式的渲染，但是：<strong>GitHub 确实会在 Jupyter notebook 里面解析并正常渲染 LaTeX 数学公式！</strong>那既然 GitHub 并没有引用第三方的渲染服务，它们究竟是怎样渲染数学公式的呢？答案是：GitHub 有自己的 LaTeX 渲染服务器，我们给这一服务器一个格式正确的 LaTeX 公式，服务器会直接给我们返回渲染好的 SVG 图片。</p>\n<p>嚯，我们要的正好就是这个服务啊！所以，我们插件的 <code class=\"language-text\">remote</code> 选项，就是借助 GitHub 官方的 LaTeX 渲染服务器，将我们的 LaTeX 数学公式转换为云端 SVG 图片。简单来说，比如下面这个标准正态分布公式：</p>\n<pre class=\"language-latex\"><code class=\"language-latex\"><span class=\"token equation string\">$$\nP(x) = <span class=\"token equation-command regex\">\\frac</span>{1}{<span class=\"token equation-command regex\">\\sigma</span><span class=\"token equation-command regex\">\\sqrt</span>{2<span class=\"token equation-command regex\">\\pi</span>}} e^{<span class=\"token equation-command regex\">\\frac</span>{-(x-<span class=\"token equation-command regex\">\\mu</span>)^2}{2<span class=\"token equation-command regex\">\\sigma</span>^2}}\n$$</span></code></pre>\n<span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mstyle mathsize=\"1.44em\"><mi>P</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><mfrac><mn>1</mn><mrow><mi>σ</mi><msqrt><mrow><mn>2</mn><mi>π</mi></mrow></msqrt></mrow></mfrac><msup><mi>e</mi><mfrac><mrow><mo>−</mo><mo stretchy=\"false\">(</mo><mi>x</mi><mo>−</mo><mi>μ</mi><msup><mo stretchy=\"false\">)</mo><mn>2</mn></msup></mrow><mrow><mn>2</mn><msup><mi>σ</mi><mn>2</mn></msup></mrow></mfrac></msup></mstyle></mrow><annotation encoding=\"application/x-tex\">\\Large P(x) = \\frac{1}{\\sigma\\sqrt{2\\pi}} e^{\\frac{-(x-\\mu)^2}{2\\sigma^2}}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.44em;vertical-align:-0.36em;\"></span><span class=\"mord mathdefault sizing reset-size6 size8\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen sizing reset-size6 size8\">(</span><span class=\"mord mathdefault sizing reset-size6 size8\">x</span><span class=\"mclose sizing reset-size6 size8\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel sizing reset-size6 size8\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.2420736em;vertical-align:-1.3392em;\"></span><span class=\"mord sizing reset-size6 size8\"><span class=\"mopen nulldelimiter sizing reset-size8 size6\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.6427799999999997em;\"><span class=\"pstrut\" style=\"height:3.44em;\"></span><span class=\"mord\"><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">σ</span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.90722em;\"><span class=\"svg-align\" style=\"top:-3.44em;\"><span class=\"pstrut\" style=\"height:3.44em;\"></span><span class=\"mord\" style=\"padding-left:0.833em;\"><span class=\"mord\">2</span><span class=\"mord mathdefault\" style=\"margin-right:0.03588em;\">π</span></span></span><span style=\"top:-3.30722em;\"><span class=\"pstrut\" style=\"height:3.44em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.13278em;\"><span></span></span></span></span></span></span></span><span style=\"top:-3.67em;\"><span class=\"pstrut\" style=\"height:3.44em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-4.117em;\"><span class=\"pstrut\" style=\"height:3.44em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.93em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter sizing reset-size8 size6\"></span></span><span class=\"mord sizing reset-size6 size8\"><span class=\"mord mathdefault\">e</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.2876916666666667em;\"><span style=\"top:-3.428102777777778em;margin-right:0.034722222222222224em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size8 size6 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.237808em;\"><span style=\"top:-2.538692em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">2</span><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9304399999999999em;\"><span style=\"top:-2.986em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line mtight\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.485em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">−</span><span class=\"mopen mtight\">(</span><span class=\"mord mathdefault mtight\">x</span><span class=\"mbin mtight\">−</span><span class=\"mord mathdefault mtight\">μ</span><span class=\"mclose mtight\"><span class=\"mclose mtight\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.07544em;\"><span style=\"top:-3.1310000000000002em;margin-right:0.07142857142857144em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.4613079999999999em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span></span></span></span></span></span></span></span></span></span>\n<p>我们可以借助插件直接将其转换为用 GitHub 服务器渲染的 SVG 图片，并用 <code class=\"language-text\">&lt;img&gt;</code> 标签插入 Markdown 之中：</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>https://render.githubusercontent.com/render/math?math=P(x)%20%3D%20%5Cfrac%7B1%7D%7B%5Csigma%5Csqrt%7B2%5Cpi%7D%7D%20e%5E%7B%5Cfrac%7B-(x-%5Cmu)%5E2%7D%7B2%5Csigma%5E2%7D%7D%0D<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>这样，我们原公式就被替换为用 GitHub 服务器渲染好的 SVG 图片：</p>\n<figure>\n  <img src=\"https://cdn.spencer.felinae98.cn/blog/2020/08/200804_134758.png\" alt=\"标准正态分布公式（GitHub LaTeX 渲染服务器渲染得到的 SVG 图片）\" width=\"300px\" >\n  <figcaption>标准正态分布公式（GitHub LaTeX 渲染服务器渲染得到的 SVG 图片）</figcaption>\n</figure>\n<p>同时，由于渲染服务器正好是 GitHub 自己的，所以肯定不会出现被屏蔽、无法访问的现象，非常靠谱。</p>\n<h3 id=\"将公式在本地渲染并直接保存为-svg-图片\"><a href=\"#%E5%B0%86%E5%85%AC%E5%BC%8F%E5%9C%A8%E6%9C%AC%E5%9C%B0%E6%B8%B2%E6%9F%93%E5%B9%B6%E7%9B%B4%E6%8E%A5%E4%BF%9D%E5%AD%98%E4%B8%BA-svg-%E5%9B%BE%E7%89%87\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>将公式在本地渲染并直接保存为 SVG 图片</h3>\n<p>SVG 这一格式非常强大，不仅是矢量图的格式标准，我们还可以在其中添加动画等高级功能。所以实际上，SVG 格式的图片会给网站带来一些安全隐患，也正因为 SVG 的这一特点，导致并非所有的地方都支持外部 SVG 的引用。为了规避这一问题，也为了让 SVG 文件的存在更可控（服务器还是有宕机的风险），我们也实现了 LaTeX 公式「本地渲染」的功能。</p>\n<p>我们插件的 <code class=\"language-text\">local</code> 功能实际上就是借助 MathJax 在本地直接将 LaTeX 公式渲染为本地 SVG 图片。这样，我们就可以将这个保存于本地的 SVG 直接在 Markdown 文件里面引用显示，同样方便。</p>\n<p>继续用上面标准正态分布的公式，我们可以将公式渲染为存储于本地的 SVG：<code class=\"language-text\">svg/e40qQ5G9jw.svg</code>，并直接保存在 Markdown 文件相邻的一个 <code class=\"language-text\">svg</code> 文件夹中。这样，我们就可以继续用 <code class=\"language-text\">&lt;img&gt;</code> 标签将这个本地 SVG 插入我们的 Markdown 之中：</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>svg/e40qQ5G9jw.svg<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">/></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<figure>\n  <img src=\"https://cdn.spencer.felinae98.cn/blog/2020/08/200804_134658.png\" alt=\"标准正态分布（本地使用 MathJax 渲染得到的 SVG 图片）\" width=\"300px\" >\n  <figcaption>标准正态分布（本地使用 MathJax 渲染得到的 SVG 图片）</figcaption>\n</figure>\n<h2 id=\"小结\"><a href=\"#%E5%B0%8F%E7%BB%93\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>小结</h2>\n<p>以上就是 VS Code Math to Image 这个 VS Code 插件的简单介绍，两种方法（<code class=\"language-text\">remote</code> 和 <code class=\"language-text\">local</code>）都可以帮我们渲染出高质量的 SVG 公式图片，这样我们就可以解决 GitHub 等平台不支持数学公式渲染的一大难题啦！如果你觉得我们的插件非常有用，那么 <a href=\"https://github.com/TeamMeow/vscode-math-to-image\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">一定要去 GitHub 给我们点上一个 Star</a>，如果 <a href=\"https://marketplace.visualstudio.com/items?itemName=MeowTeam.vscode-math-to-image&#x26;ssr=false#review-details\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">能去 VS Marketplace 给我们个五星好评</a> 那就更棒啦。</p>\n"}}]}}},"context":{}}